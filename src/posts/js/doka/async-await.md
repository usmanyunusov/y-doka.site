---
title: "async/await"
name: async-await
author: N_Lopin
co-authors:
designers:
contributors:
summary:
  - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
  - api
---

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–≤—è–∑–∞–Ω–∞ —Å –ø–æ–Ω—è—Ç–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –≤ JavaScript. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ—Ç–∞–ª—è—Ö –æ–ø–∏—Å–∞–Ω–æ –≤ –æ–±–∑–æ—Ä–Ω–æ–π —Å—Ç–∞—Ç—å–µ [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –≤ JS](/js/long/async-in-js) .

## –ö—Ä–∞—Ç–∫–æ

–î–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `async` –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π. –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ Promise:

```js
async function getStarWarsMovies() {
  return 1
}

console.log(getStarWarsMovies()) // Promise { <state>: "fulfilled", <value>: 1 }
```

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω—É–∂–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: —Ä–∞–±–æ—Ç–æ–π —Å API, –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ —Ç.–¥.

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ —Å—Ä–∞–∑—É: –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å –∫ API –∏ –∂–¥–µ—Ç, –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏—à–ª–µ—Ç –æ—Ç–≤–µ—Ç. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `await` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```js
async function getStarWarsMovie(id) {
  const response = await fetch(`https://swapi.dev/api/films/${id}/`)
  console.log("–æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω", response) // *1
  return response.json()
}

const movies = getStarWarsMovie(1).then((movie) => {
  console.log(movie.title)
}) // *2
console.log("—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏", movies) // *3
```

–î–≤–∏–∂–æ–∫ JavaScript –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–¥. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è.

–í—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π:

```js
"—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏" Promise // –≤—ã–∑–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é, –æ–Ω–∞ –Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –≤–µ—Ä–Ω—É–ª–∞ Promise (*3)
"–æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω" Response // –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç API, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (*1)
"A New Hope" // —Å—Ä–∞–±–æ—Ç–∞–ª callback (*2)
```

## –ö–∞–∫ –ø–æ–Ω—è—Ç—å

–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ `async/await` –Ω–µ –ø—Ä–∏–≤–Ω–æ—Å—è—Ç –≤ JavaScript —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ. –û–Ω–∏ —Ç–æ–ª—å–∫–æ —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å Promise.

–í–º–µ—Å—Ç–æ –∫–æ–¥–∞ —Å —Ü–µ–ø–æ—á–∫–æ–π –≤—ã–∑–æ–≤–æ–≤:

```js
function getMainActorProfileFromMovie(id) {
  return fetch(`https://swapi.dev/api/films/${id}/`)
    .then((movieResponse) => {
      return movieResponse.json()
    })
    .then((movie) => {
      const characterUrl = movie.characters[0].split("//")[1]
      return fetch(`https://${characterUrl}`)
    })
    .then((charactrerResponse) => {
      return charactrerResponse.json()
    })
    .catch((err) => {
      console.error("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!", err)
    })
}

getMainActorProfileFromMovie(1).then((profile) => {
  console.log(profile)
})
```

–ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å —Å `async/await`:

```js
function getMainActorProfileFromMovie(id) {
  try {
    const movieResponse = await fetch(`https://swapi.dev/api/films/${id}/`);
    const movie = await movieResponse.json();

    const characterUrl = movie.characters[0].split('//')[1];
    const charactrerResponse = await fetch(`https://${characterUrl}`);
    return charactrerResponse.json();
  } catch(err) {
    console.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!', err);
  }
}

getMainActorProfileFromMovie(1).then((profile) => {console.log(profile)});
```

–¢–∞–∫–æ–π –∫–æ–¥ –ø—Ä–æ—â–µ –ø–æ–Ω–∏–º–∞—Ç—å:

- –æ–Ω –ø–ª–æ—Å–∫–∏–π
- –≤—ã–≥–ª—è–¥–∏—Ç, –∫–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π try...catch –±–ª–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

‚òùÔ∏è –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `await` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –í—ã–∑–≤–æ–≤ –µ–≥–æ –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–æ–π:

```js
function getMainActorProfileFromMovie(id) {
  // –∫–æ–¥ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ
}

await getMainActorProfileFromMovie(1)
```

–ö–æ–¥ —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π `SyntaxError: await is only valid in async functions and async generators`.

## –í —Ä–∞–±–æ—Ç–µ

üõ† –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `async/await` –≤–º–µ—Å—Ç–æ —Ü–µ–ø–æ—á–µ–∫ `then` –∏ –∫–æ–ª–±—ç–∫–æ–≤.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø—Ä–æ—â–µ —á–∏—Ç–∞–µ—Ç—Å—è, –ª–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞–µ—Ç—Å—è, –ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

üõ† `await` –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, –ø—Ä–∏–¥–µ—Ç—Å—è –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `then`.
